---
title: "R Notebook"
output: html_notebook
---


```{r}
library(tidyverse)

theme_set(theme_minimal())
```


```{r}
search_results <- read_rds(here::here("proc_data/search_results.rds"))
keywords <- read_csv(here::here("raw_data/download_from_gdrive/keywords_60k.csv"))
```

```{r}
google <- search_results %>% 
  filter(search_engine == "Google") %>% 
  filter(!keyword %in% c("the rolling stones ",
                         "4th of july ",
                         "let's dance "),
         !is.na(keyword)) %>% 
  mutate_at(vars(rank_group, rank_absolute), ~as.numeric(.))
```


```{r}
google %>% 
  glimpse()
```

```{r}
google %>% 
  skimr::skim()
```

```{r}
google %>% 
  filter(!keyword %in% c("the rolling stones ",
                         "4th of july ",
                         "let's dance "),
         !is.na(keyword)) %>% 
  mutate_at(vars(rank_group, rank_absolute), ~as.numeric(.)) %>% 
  count(rank_group) %>% 
  ggplot(aes(x = rank_group, y = n)) +
  geom_col()
```



```{r}
keywords %>% 
  filter(keyword_id == 48819)
```

```{r}
keywords %>% 
  filter(str_detect(keyword, "~"))
```



```{r}
google %>% 
  group_by(type) %>% 
  summarise(n = n(),
            num_keywords = n_distinct(keyword),
            average_rank = mean(rank_absolute))
```

# EDA on keywords

```{r}
keywords %>% 
  glimpse()
```

```{r}
keywords %>% 
  skimr::skim()
```



```{r}
keywords %>% 
  count(monthly_search_volume_level, sort = T)
```

